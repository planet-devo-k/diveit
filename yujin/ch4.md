## **서버 사이드 렌더링 (SSR) 및 리액트 API 정리**

### **1. 서버 사이드 렌더링 (SSR)의 이해**

**싱글 페이지 애플리케이션 (SPA)의 특징**
• **작동 방식**: 렌더링과 라우팅의 대부분을 **브라우저의 자바스크립트**에 의존합니다.
• **페이지 전환**: 최초 로딩 이후, 페이지 전환 시 서버에서 HTML을 새로 내려받지 않고, 자바스크립트와 브라우저의 `history` API를 사용해 필요한 부분만 다시 그립니다.
• **장점**: 페이지 로딩 후에는 빠르고 매끄러운 UI/UX를 제공합니다.
• **문제점**: 자바스크립트 코드의 양이 증가하면서, **자바스크립트 파싱 및 실행 시간 증가**로 인해 초기 로딩 및 상호 작용 가능 시간이 지연되는 문제가 발생했습니다.

### **서버 사이드 렌더링 (SSR)의 개념**

- **최초에 사용자에게 보여줄 페이지**를 **서버에서 렌더링**하여 완성된 HTML을 사용자에게 빠르게 제공하는 방식입니다.

### **SSR의 장점**

• **빠른 최초 페이지 진입**: 완성된 HTML을 먼저 보여주므로 사용자가 콘텐츠를 빠르게 볼 수 있습니다.
• **SEO (검색 엔진 최적화) 용이**: 검색 엔진 크롤러가 HTML 문서를 쉽게 파싱할 수 있어 메타데이터 제공이 쉽습니다.
• **누적 레이아웃 이동 (CLS) 감소**: 페이지가 처음부터 완전하게 그려지므로 렌더링 이후 레이아웃이 이동할 가능성이 적습니다.
• **디바이스 성능에 비교적 자유로움**: 무거운 렌더링 작업을 클라이언트 대신 서버가 수행합니다.
• **보안**: 민감한 데이터 처리 로직을 서버에 둘 수 있어 클라이언트보다 보안에 더 안전합니다.

### **SSR의 단점**

• **소스코드 작성 시 서버 고려**: 클라이언트와 서버 환경을 모두 고려해야 하므로 개발 복잡도가 증가합니다.
• **적절한 서버 구축 필요**: 렌더링 작업을 수행할 수 있는 서버 환경이 필수입니다.
• **서비스 지연 문제**: 렌더링 작업 부하로 인해 서버의 응답이 늦어질 경우 사용자 경험이 저하될 수 있습니다.

### **2. 서버 사이드 렌더링을 위한 리액트 API**

- 리액트는 서버 환경에서 컴포넌트를 HTML 문자열 또는 스트림으로 변환하는 다양한 API를 제공합니다.**API결과물 형태용도/특징**`renderToString`HTML **문자열**SSR의 가장 기초적인 API. 최초 페이지를 HTML로 변환합니다. 자바스크립트 코드는 별도로 제공되어야 합니다.`renderToStaticMarkup`HTML **문자열**`renderToString`과 동일하지만, **`data-reactroot` 같은 리액트 전용 DOM 속성을 생성하지 않습니다**. 이벤트 리스너가 필요 없는 **순수한 HTML**을 만들 때 사용합니다.`renderToNodeStream`Node.js **ReadableStream**`renderToString`과 동일한 결과물을 **스트림** 형태로 반환합니다. **큰 데이터를 다룰 때** 청크(chunk) 단위로 전송하여 서버 부하를 줄이고 응답 속도를 개선합니다. (Node.js 환경에서만 사용 가능)`renderToStaticNodeStream`Node.js **ReadableStream**`renderToStaticMarkup`의 스트림 버전입니다. 리액트 속성이 없는 순수 HTML 스트림이 필요할 때 사용합니다.**`hydrate`**-`renderToString`이나 `renderToNodeStream`으로 서버에서 생성된 HTML 콘텐츠에 **자바스크립트 핸들러와 이벤트 리스너를 붙여** 상호 작용 가능한 상태로 만듭니다. (클라이언트에서 실행)

### **💡 `hydrate`의 역할**

- `hydrate`는 클라이언트 측에서 실행되며, 이미 존재하는 서버 렌더링된 HTML에 **React의 생명 주기와 이벤트 시스템을 주입**하는 과정입니다. 이는 `ReactDOM.render`가 HTML을 처음부터 새로 렌더링하는 것과 달리, 기존 마크업을 활용하여 **이벤트 부착** 작업만 수행합니다.
