## **리액트의 주요 훅(Hooks) 정리**

**1. `useState`**
함수 컴포넌트 내에서 **상태(State)를 정의하고 관리**하게 해주는 훅입니다.
• **역할**: 상태 값과 그 값을 업데이트하는 함수(`setState`)를 배열로 반환합니다.
• **특징**: `setState` 함수가 호출되면 컴포넌트 리렌더링이 발생합니다.
• **구현 원리**: 리액트는 클로저를 이용해 **함수가 다시 실행되어도 이전 상태 값을 유지**합니다.
• **게으른 초기화**: 초깃값으로 **함수를 넘기면** 첫 렌더링 시에만 실행되어 초기 상태를 설정합니다.

**2. `useEffect`**
함수 컴포넌트 내에서 **부수 효과(Side Effects)**를 수행할 수 있게 해주는 훅입니다.
• **구조**: 첫 번째 인수로 부수 효과 함수(콜백), 두 번째 인수로 **의존성 배열(Dependency Array)**을 전달합니다.
• **실행 시점**: 의존성 배열의 값이 변경될 때마다 콜백 함수가 실행됩니다.
• **의존성 배열**:
◦ **빈 배열 (`[]`)**: **최초 렌더링 직후**에만 실행됩니다.
◦ **없음**: **매 렌더링마다** 실행됩니다. (렌더링 완료 후에 실행됨을 보장하여 DOM 접근 코드를 안전하게 사용 가능)
• **클린업 함수**: 부수 효과 콜백 함수에서 반환하는 함수로, **다음 렌더링 시 부수 효과가 실행되기 전에 이전 상태를 청소**하는 목적으로 사용됩니다. (언마운트 시에도 실행됨)
• **비교**: `Object.is` 기반의 **얕은 비교**로 의존성 배열의 변경 여부를 판단합니다.
• **주의사항**: 의존성 배열을 누락하지 않도록 주의하고, 불필요한 복잡성을 피하기 위해 거대한 `useEffect`를 만들지 않습니다.

**3. `useMemo`**
**비용이 큰 연산의 결과 값**을 저장해두고 재사용하는 **메모이제이션**을 위한 훅입니다.
• **구조**: 값을 반환하는 생성 함수와 의존성 배열을 인수로 받습니다.
• **동작**: 의존성 배열의 값이 **변경되지 않으면** 함수를 다시 실행하지 않고 **기억된 값**을 반환합니다. 변경되면 함수를 실행하고 새 값을 기억합니다.

**4. `useCallback`**
**인수로 넘겨받은 콜백 함수 자체**를 저장해두고 재사용하는 메모이제이션을 위한 훅입니다.
• **목적**: 함수의 재생성을 막아 **불필요한 리소스 낭비나 하위 컴포넌트의 리렌더링**을 방지합니다.
• **차이**: `useMemo`는 **결과 값**을, `useCallback`은 **함수 자체**를 메모이제이션하는 것 외에는 동일한 역할을 수행합니다.

**5. `useRef`**
컴포넌트 내부에서 **렌더링과 무관하게 변경 가능한 상태 값을 저장**하게 해주는 훅입니다.
• **값 접근/변경**: 반환된 객체의 **`.current`** 속성으로 접근하거나 변경합니다.
• **특징**: 값이 변하더라도 **렌더링을 발생시키지 않습니다**.
• **용도**: DOM 요소에 직접 접근하거나, 컴포넌트 생애 주기 동안 유지되어야 하는 변경 가능한 값을 저장하는 데 사용됩니다.

**6. `useContext`**
**Context**를 함수 컴포넌트에서 사용할 수 있도록 해주는 훅입니다.
• **Context**: 명시적인 Props 전달(Prop Drilling) 없이 컴포넌트 트리 전체에 걸쳐 값을 제공합니다.
• **동작**: 가장 가까운 상위 `<Context.Provider />`에서 제공한 값을 가져옵니다.
• **주의사항**: 컴포넌트 재활용이 어려워질 수 있으므로, 재사용성이 낮은 컴포넌트에서 사용하거나, Context를 상태 관리 API가 아닌 **상태를 주입하는 API**로 인식하고 사용해야 합니다.

**7. `useReducer`**
`useState`의 심화 버전으로, **복잡한 상태 로직을 외부로 분리**하여 관리할 수 있게 해주는 훅입니다.
• **인수**: `(reducer, initialState, init?)` 3개를 받습니다.
◦ `reducer`: 현재 상태와 `action`을 받아 새로운 상태를 반환하는 함수입니다.
◦ `initialState`: 초깃값입니다.
◦ `init`: 게으른 초기화를 위한 함수입니다.
• **반환값**: `[state, dispatcher]` (현재 상태와 상태 업데이트 함수)를 배열로 반환합니다.
• **목적**: 상태 변경 시나리오를 `dispatcher` (액션을 넘겨주는 함수)로 제한하여 **상태 관리의 예측 가능성**을 높입니다.

**8. `useImperativeHandle`**
`forwardRef`와 함께 사용되며, **부모 컴포넌트에게 노출할 ref의 속성을 정의하거나 제한**할 수 있게 해주는 훅입니다.
• **전제**: **`forwardRef`**를 사용하여 부모로부터 ref를 전달받아야 합니다.
• **역할**: 부모에게서 넘겨받은 ref의 **`.current` 객체**를 원하는 대로 수정합니다.

**9. `useLayoutEffect`**
함수의 시그니처는 `useEffect`와 동일하나, **모든 DOM 변경 후에 동기적으로 발생**합니다.
• **실행 순서**: (1) DOM 업데이트 $\rightarrow$ (2) `useLayoutEffect` 실행 $\rightarrow$ (3) 브라우저에 변경사항 반영 $\rightarrow$ (4) `useEffect` 실행
• **사용 시점**: DOM이 계산되었지만 화면에 반영되기 **이전**에, DOM을 측정한 후 스타일을 변경하는 등 **브라우저에 레이아웃을 다시 계산하게 만드는 작업**이 필요할 때 사용합니다.

**10. `useDebugValue`**
리액트 애플리케이션 개발 과정에서 사용하며, 사용자 정의 훅 내에서 **디버깅하고 싶은 정보를 리액트 개발자 도구에 표시**할 수 있게 해주는 훅입니다.

### **훅의 규칙 (Rules of Hooks)**

1. **최상위에서만 훅을 호출**할 것: 반복문, 조건문, 중첩된 함수 내에서 훅을 실행할 수 없습니다. 이는 렌더링마다 훅이 **항상 동일한 순서**로 호출되는 것을 보장하기 위함입니다.
2. **리액트 함수 컴포넌트** 혹은 **사용자 정의 훅**에서만 훅을 호출할 것: 일반 자바스크립트 함수에서는 사용할 수 없습니다.

### **🛠️ 사용자 정의 훅 vs. 고차 컴포넌트 (HOC)**

### **1. 사용자 정의 훅 (Custom Hook)**

`use`로 시작하는 함수 이름으로, **서로 다른 컴포넌트 내부에서 같은 로직을 공유**하기 위해 리액트의 기본 훅을 기반으로 개발자가 직접 만드는 기법입니다.
• **목적**: 로직 재사용 (데이터 fetching, 이벤트 핸들링 등)
• **특징**:
◦ 훅의 규칙을 따라야 합니다.
◦ 함수 컴포넌트의 로직 영역에만 영향을 미치며, **렌더링 결과물(JSX)** 자체에는 직접적인 영향을 미치지 않습니다.

### **2. 고차 컴포넌트 (HOC; Higher Order Component)**

**컴포넌트 자체의 로직을 재사용**하기 위한 방법입니다. 함수를 인수로 받거나 결과로 반환하는 고차 함수의 일종입니다.
• **React.memo**: Props의 변화가 없을 때 렌더링을 생략하여 성능을 최적화하는 리액트 내장 HOC입니다. (`useMemo`와 달리 컴포넌트를 감쌈)
• **주의사항**:
◦ `with`으로 시작하는 이름을 사용하는 것이 관례입니다.
◦ 여러 HOC로 감쌀 경우 복잡성이 커지므로 최소한으로 사용해야 합니다.

### **3. 선택 기준: 무엇을 써야 할까?**

**구분사용자 정의 훅 (Custom Hook)고차 컴포넌트 (HOC)재사용 대상**리액트 **훅**으로 격리 가능한 **공통 로직\*\***함수 컴포넌트의 반환값(렌더링의 결과물)**에도 영향을 미치는 공통 로직**주요 사용처**데이터 요청, 상태 동기화, 이벤트 구독/해제 등 **로직 영역**컴포넌트 자체에 공통 속성 부여, 조건부 렌더링, 레이아웃 변경 등 **렌더링 결과 영역**
• **결론**: 리액트가 제공하는 훅으로만 공통 로직을 격리할 수 있다면 **사용자 정의 훅**을, 함수 컴포넌트의 **렌더링 결과물**까지 변경해야 하는 공통 로직이라면 **고차 컴포넌트\*\*를 사용합니다.
