# Ch.13 웹페이지의 성능을 측정하는 다양한 방법

## 1. 애플리케이션에서 확인하기 (Code Level)

개발 단계에서 코드를 통해 성능 지표를 수집하고 로그를 확인하는 방법입니다.

### 1.1 create-react-app (CRA)

- 도구: reportWebVitals 함수 (기본 포함)

- 원리: 구글의 web-vitals 라이브러리를 사용하며, 내부적으로 브라우저의 PerformanceObserver API를 활용합니다.

- 측정 지표:
  - CLS (Cumulative Layout Shift): 누적 레이아웃 이동

  - FID (First Input Delay): 최초 입력 지연

  - FCP (First Contentful Paint): 최초 콘텐츠풀 페인트

  - LCP (Largest Contentful Paint): 최대 콘텐츠풀 페인트

  - TTFB (Time To First Byte): 첫 바이트까지의 시간

- 데이터 전송:
  - console.log로 즉시 확인하거나, navigator.sendBeacon API를 사용하여 페이지 이탈 시점에도 서버나 Google Analytics로 비동기 데이터 전송이 가능합니다.

### 1.2 create-next-app (Next.js)

- 도구: NextWebVitalsMetric 메서드 (\_app.js 또는 \_app.tsx에서 사용)

- 특징: 핵심 웹 지표 외에 Next.js 특화 지표를 추가로 제공합니다.
  - Next.js-hydration: 서버 사이드 렌더링 후 하이드레이션 완료 시간

  - Next.js-route-change-to-render: 페이지 경로 변경 후 렌더링 시작 시간

  - Next.js-render: 렌더링 완료 시간

## 2. 구글 라이트하우스 (Google Lighthouse)

- 브라우저 확장 프로그램이나 개발자 도구 탭에서 사용할 수 있는 가장 대중적인 도구입니다.

### 2.1 분석 모드

- 탐색 모드 (Navigation): 페이지 접속부터 로딩 완료까지 측정 (기본값).

- 기간 모드 (Timespan): 사용자가 웹페이지를 실제 탐색/상호작용하는 기간 동안 측정.

- 스냅샷 (Snapshot): 현재 로딩된 페이지의 특정 상태를 기준으로 분석.

### 2.2 주요 측정 항목

- 성능 (Performance):
  - 핵심 웹 지표 (LCP, CLS 등)

  - TTI (Time to Interactive): 사용자가 완전히 상호작용 가능해지는 시간

  - Speed Index: 콘텐츠가 얼마나 빨리 시각적으로 표시되는지

  - TBT (Total Blocking Time): 메인 스레드가 차단된 총 시간 (50ms 이상 작업 합산)

- 접근성 (Accessibility): 대체 텍스트(alt), 키보드 접근성, 적절한 색 대비 등.

- 권장사항 (Best Practices): 보안(HTTPS), CSP 설정, 불필요한 API 사용 여부 등.

- SEO: 검색 엔진 최적화 상태 점검.

## 3. WebPageTest

가장 상세한 분석 도구로, 다양한 서버 위치와 브라우저 환경을 설정하여 테스트할 수 있습니다.

### 3.1 주요 기능

- Site Performance: 테스트 환경(위치, 기기 등)을 커스텀하여 측정.

- Filmstrip: 시간 흐름에 따라 화면이 어떻게 그려지는지 필름처럼 보여줌 (렌더링 블로킹 요소 파악에 용이).

- Waterfall Chart: 리소스 로딩 순서와 시간을 시각화하여 병목 구간 확인 가능.

- Visual Comparison: 2개 이상의 사이트를 동시에 실행하여 로딩 속도 비교.

### 3.2 3가지 평가 기준

- Is it Quick: 웹사이트가 충분히 빠른가? (TTFB, LCP 등)

- Is it Usable: 사용성과 시각적 안정성 (CLS, 접근성)

- Is it Resilient: 보안 취약성 및 안정성 (HTTPS 등)

4. 크롬 개발자 도구 (Chrome DevTools)

### 4.1 성능 (Performance) 탭

- 웹페이지의 로딩 과정을 정밀하게 녹화하여 분석합니다.

- CPU 및 네트워크 스로틀링: 고의로 성능을 낮춰 열악한 환경(모바일 등)을 시뮬레이션 가능.

- 세부 분석:
  - Main-thread Processing: 자바스크립트 실행, 레이아웃 계산 등 메인 스레드 작업 확인.

  - Layout Shifts: 레이아웃 이동이 발생한 정확한 시점 파악.

  - Network: 리소스 요청 순서 및 의존성 확인.

### 4.2 성능 통계 (Performance Insights) - Experimental

- 기존 성능 탭보다 더 직관적인 인사이트를 제공하며, 주요 이벤트(LCP, FCP) 발생 시점을 타임라인에 표시해 줍니다.

- 참고: 일부 버전에서는 활성화가 안 될 수 있음.
